<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd">
<?rfc toc="yes"?>
<?rfc tocompact="yes"?>
<?rfc tocdepth="3"?>
<?rfc tocindent="yes"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes"?>
<?rfc comments="yes"?>
<?rfc inline="yes"?>
<?rfc compact="yes"?>
<?rfc subcompact="no"?>
<rfc category="info"
     docName="draft-gcdrb-teas-5g-network-slice-application-01"
     ipr="trust200902">
  <front>
    <title abbrev="draft-gcdrb-teas-5g-network-slice-application-00">IETF
    Network Slice Application in 3GPP 5G End-to-End Network Slice</title>

    <author fullname="Xuesong Geng" initials="X." surname="Geng">
      <organization>Huawei Technologies</organization>

      <address>
        <email>gengxuesong@huawei.com</email>
      </address>
    </author>

    <author fullname="Luis M. Contreras" initials="L." surname="Contreras">
      <organization>Telefonica</organization>

      <address>
        <postal>
          <street/>

          <city/>

          <region/>

          <code/>

          <country/>
        </postal>

        <phone/>

        <facsimile/>

        <email>luismiguel.contrerasmurillo@telefonica.com</email>

        <uri/>
      </address>
    </author>

    <author fullname="Reza Rokui" initials="R." surname="Rokui">
      <organization>Ciena</organization>

      <address>
        <postal>
          <street/>

          <city/>

          <region/>

          <code/>

          <country/>
        </postal>

        <phone/>

        <facsimile/>

        <email>rrokui@ciena.com</email>

        <uri/>
      </address>
    </author>

    <author fullname="Jie Dong" initials="J." surname="Dong">
      <organization>Huawei Technologies</organization>

      <address>
        <email>jie.dong@huawei.com</email>
      </address>
    </author>

    <author fullname="Ivan Bykov" initials="I." surname="Bykov">
      <organization>Ribbon Communications</organization>

      <address>
        <postal>
          <street/>

          <city/>

          <region/>

          <code/>

          <country/>
        </postal>

        <phone/>

        <facsimile/>

        <email>Ivan.Bykov@rbbn.com</email>

        <uri/>
      </address>
    </author>

    <date day="17" month="March" year="2023"/>

    <area>Routing Area</area>

    <workgroup>TEAS Working Group</workgroup>

    <abstract>
      <t>Network Slicing is one of the core features of 5G defined in 3GPP,
      which provides different network service as independent logical
      networks. To provide 5G network slices services, an end-to-end network
      slices have to span three network segments: Radio Access Network (RAN),
      Mobile Core Network (CN) and Transport Network (TN). This document
      describes the application of the IETF network slice framework in
      providing 5G end-to-end network slices, Including network slice mapping
      in management plane, control plane and data plane.</t>
    </abstract>
  </front>

  <middle>
    <section title="Introduction">
      <t>Driven by the new applications, 3GPP introduced the concept of
      network slicing as a feature of its 5G specification. Such a concept is
      meant to provide a customized connectivity service with specific
      capabilities and characteristics. A network slice may include a set of
      network functions and resources(e.g. computation, storage and network
      resources).</t>

      <t>The IETF Network Slice service is defined in <xref
      target="I-D.ietf-teas-ietf-network-slices"/> as a set of connections
      between a number of SDPs (e.g., CE, NF), with these connections having
      specific Service Level Objectives (SLOs) and Service Level Expectations
      (SLEs) over a common underlay network, with the traffic of one customer
      being separated from another. The concept of IETF network slice service
      is conceived as technology agnostic.</t>

      <t>The IETF NS service is specified in terms of the set of service
      delivery endpoints connected to the slice, the type of connectivity
      among them, and a set of SLOs and SLEs for each connectivity
      construct.</t>

      <t>In <xref target="I-D.ietf-teas-ietf-network-slice-nbi-yang"/>, the
      endpoints are identified by an identifier, with some metrics associated
      to the connections among them as well as certain policies (e.g., rate
      limits for incoming and outgoing traffic).</t>

      <t>The 5G network slice as defined in [3GPP TS 23.501] does not take the
      transport network slice into consideration. This document introduces the
      concept of 5G end-to-end network slice service, which is built over
      three network segments: Radio Access Network (RAN), Transport Network
      (TN) and Core Network (CN). Transport network is supposed to provide the
      required connectivity between AN and CN or inside RAN/CN, with specific
      performance commitment. The 5G end-to-end network slice services may
      have distinct topology and performance requirements on the underlying
      transport network. The transport network should have thus capability to
      support multiple transport network slices. The decision about the number
      of such transport slices is deployment specific.</t>

      <t>This document addresses the request of IETF Network Slice services
      for 3GPP 5G Network Slices. The realization of such requested IETF
      network slices is out of the scope of this document and addressed in
      other documents such as <xref target="I-D.ietf-teas-enhanced-vpn"/>
      <xref target="I-D.ietf-teas-ns-ip-mpls"/> <xref
      target="I-D.ietf-teas-nrp-scalability"/> and <xref
      target="I-D.srld-teas-5g-slicing"/>.</t>
    </section>

    <section title="Terminology">
      <t/>

      <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in [RFC2119].</t>

      <t>This document uses the terms defined in <xref
      target="I-D.ietf-teas-ietf-network-slices"/> :</t>

      <t>The following terms abbreviations are used in this document:</t>

      <t>NSC: IETF Network Slice Controller</t>

      <t>NSI: Network Slice Instance</t>

      <t>NSSI: Network Slice Subnet Instance</t>

      <t>S-NSSAI: Single Network Slice Selection Assistance Information</t>

      <t>RAN: Radio Access Network</t>

      <t>TN: Transport Network</t>

      <t>CN: Mobile Core Network</t>

      <t>DSCP: Differentiated Services Code Point</t>

      <t>CSMF: Communication Service Management Function</t>

      <t>NSMF: Network Slice Management Function</t>

      <t>NSSMF: Network Slice Subnet Management Function</t>

      <t>IOC: Information Object Class model, defined in 3GPP</t>
    </section>

    <section title="5G End-to-End Network Slice Service">
      <t>The scope of a 5G End-to-End Network Slice service discussed in this
      document is shown in <xref target="fig_scope_3gpp_ns"/>. The transport
      network provides connectivity between and within RAN and CN. To support
      automated enablement of 5G E2E network slices, multiple controllers are
      likely to manage 5G E2E network slices across RAN, CN and TN. In
      addition, a 5G E2E network slice orchestrator is used to coordinate and
      control the overall stitched network slices.</t>

      <t/>

      <figure align="center" anchor="fig_scope_3gpp_ns">
        <name>Scope of 5G End to End Network Slice</name>

        <artwork align="left"><![CDATA[
       +-----------------------------------------------------+
       |          +-----------------------------+            |            
 |-----+----------+----------------+            |            | 
 |   ******   +---+---+   ******   | +----+     |            |  
 |  *      *  |       |  *      *  | |    |     |            | 
 | *  RAN   ---  TN   ---  RAN   --|--    |     |            |  
 |  * NFs  *  |       |  * NFs  *  | |    |     |            |  
 |   ******   +-------+   ******   | |    |     |            |
 |---------------------------------+ |    |   +-+--+  +------+------+
                 RAN                 |    |   |IETF|  |   5G E2E    |
                                     |    +---+ NSC+--+Network Slice|
                                     |TN  |   |    |  | Orchestrator|
                                     |    |   +-+--+  +------+------+
 +---------------------------------+ |    |     |            |           
 |   ******   +-------+   ******   | |    |     |            |        
 |  *      *  |       |  *      *  | |    |     |            |        
 | *  CN    ---  TN   ---  CN   ---|--    |     |            |           
 |  * NFs  *  |       |  * NFs  *  | |    |     |            |           
 |   ******   +---+---+   ******   | +----+     |            |           
 +-----+----------+----------------+            |            |          
       |        CN|                             |            |  
       |          +-----------------------------+            |  
       +-----------------------------------------------------+
           
         ]]></artwork>
      </figure>

      <t>Depending on RAN deployment, one or multiple IETF network slice might
      be needed to provide a 5G slice service (i.e, in the 3GPP network). The
      following RAN deployments are discussed in the following subsections:
      <list style="symbols">
          <t>Distributed RAN</t>

          <t>Centralized RAN</t>

          <t>Cloud RAN (C-RAN)</t>
        </list></t>

      <section anchor="section_d_ran"
               title="IETF Network Slices in Distributed RAN deployment">
        <t>Distributed RAN is the most common deployment of 3GPP RAN networks
        as shown in <xref target="fig_d_ran"/>. RAN is connected to CN using a
        transport network (TN1).</t>

        <figure align="center" anchor="fig_d_ran">
          <name>An Example of IETF Network Slices Deployment with Distributed
          RAN</name>

          <artwork align="left"><![CDATA[
   <-------------- 3GPP E2E Network Slice  ------------->
     <---- RS ---->           <-------- CS ---------->
                    <- INS1 ->         <- INS2 ->
   .................          .........................
   : RAN           :          : CN                    :
   :               : ........ :        .......        :
   : |----| |----| : :      : : |----| :     : |----| :
   : | NF1| | NF2| : :  TN1 : : | NF | : TN2 : | NF | :
   : |----| |----| : :      : : |----| :     : |----| :
   :               : :......: :        :.....:        :
   :...............:          :.......................:  

   Legend
     INS: IETF Network Slice
     RS: RAN Slice
     CS: Core Slice
]]></artwork>
        </figure>
      </section>

      <section anchor="section_centralized_ran"
               title="IETF Network Slices in Centralized RAN Deployment">
        <t>The RAN network consists of network functions NF1 and MF2. NF1
        processes the radio signal and is connected to the transport network
        and NF2 transmits and receives the carrier signal that is transmitted
        over the air to the end user equipment (UE). In Centralized RAN as
        depicted in <xref target="fig_centralized_ran"/>, network functions
        NF1 and NF2 are separated by a network called fronthaul network
        (FH).</t>

        <t>In this deployment a 3GPP network slice contains of RAN and Core
        slices and IETF network slices INS1, INS2 and INS3. INS1 and INS2 are
        similar to those of <xref target="fig_d_ran"/> and INS3 is an IETF
        network slice across access network between NF1 and NF2.</t>

        <figure align="center" anchor="fig_centralized_ran">
          <name>Examples of IETF Network Slices Deployment with Centralized
          RAN deployment</name>

          <artwork align="left"><![CDATA[
   <-------------------- 3GPP E2E Network Slice  ----------------->
     <-------- RS --------->           <---------- CS --------->
          <- INS3 ->        <- INS1 ->         <- INS2 ->
   .........................          ...........................
   : RAN                   :          : CN                      :
   :        .......        : ........ :         .......         :
   : |----| :     : |----| : :      : : |-----| :     : |-----| :
   : | NF1| : TN3 : | NF2| : :  TN1 : : | NF  | : TN2 : | NF  | :
   : |----| : (FH): |----| : :      : : |-----| :     : |-----| :
   :        :.....:        : :......: :         :.....:         :
   :.......................:          :.........................: 

Legend
  INS: IETF Network Slice
  RS: RAN Slice
  CS: Core Slice
  FN: Fronthaul IETF network
            
          ]]></artwork>
        </figure>
      </section>

      <section anchor="section_c_ran"
               title="IETF Network Slices in Cloud RAN deployment (C-RAN)">
        <t>In a Cloud RAN deployment, the network function NF2 is further
        disaggregated into real-time and non-real-time components. As shown in
        <xref target="fig_c_ran"/>, these disaggregated components are called
        CU (Central Unit) and DU (Distributed Unit) where they are connected
        by a new network called Midhaul network (MH).</t>

        <t>In this deployment 3GPP network slice contains not only RAN and
        Core slices but IETF network slices INS1, INS2, INS3 and INS4. IETF
        network slices INS1, INS2 and INS3 are similar to those in <xref
        target="fig_centralized_ran"/>). An additional IETF network slice INS4
        is used to connect the DUs to CUs through F1 interfaces.</t>

        <figure align="center" anchor="fig_c_ran">
          <name>Example of IETF Network Slices Deployment with Cloud RAN
          deployment</name>

          <artwork align="left"><![CDATA[
   <---------------------- 3GPP E2E Network Slice  ------------------>
     <-------------- RS -------------->          <------- CS ------>
          <- INS3 ->      <- INS4 ->   <- INS1 ->     <- INS2 ->
   .....................................        .....................
   : RAN                               :        :CN                 :
   :       .......       ......        : ...... :       .....       :
   : |---| :     : |---| :     : |---| : :    : : |---| :   : |---| :
   : |NF1| : TN3 : | DU| : TN4 : | CU| : :TN1 : : | NF| :TN2: | NF| :
   : |---| : (FH): |---| : (MH): |---| : :(BH): : |---| :   : |---| :
   :       :.....:       :.....:       : :....: :       :...:       :
   :...................................:        :...................:  

Legend
  INS: IETF Network Slice
  RS: RAN Slice
  CS: Core Slice
  FN: Fronthaul IETF network
  MN: Midhaul IETF bnetwork
  BH: Backhual IETF network
  DU: Distributed Unit
  CU: Central Unit

             
          ]]></artwork>
        </figure>
      </section>

      <section anchor="section_relationship_3gpp_ins"
               title="Relationship Between IETF Network Slices and 3GPP Network Slices">
        <t>For the sake of illustration, the descriptions below all take the
        TN slice between RAN and CN as an example, and the other cases are
        similar. <xref target="fig_ins_3gpp"/> shows the correspondence
        between network entities in 5G slices and IETF slices respectively</t>

        <figure align="center" anchor="fig_ins_3gpp">
          <name>Relationship between 3GPP domain controllers and IETF Network
          Slice Controller</name>

          <artwork align="left"><![CDATA[
     +---------------------+                                                    
     |         CSMF        |                                                    
     +----------|----------+                                                    
                |                    +------------------------+                 
     +---------------------+         |  5G E2E Network Slice  |                 
     |         NSMF        |         |      Orchestrator      |                 
     +---------------------+         +------------------------+                 
           /    |    \                            |                          
          /     |     \           IETF Network Slice Service Interface                      
         /      |      \                          |                          
+---------++---------++---------+    +------------------------+           
|    AN   ||    TN   ||   CN    |    |   IETF Network Slice   |                 
|   NSSMF ||   NSSMF ||  NSSMF  |    |     Controller(s)      |                 
|         ||         ||         |    +------------------------+                 
+---------++---------++---------+   Network configuration interface                 
     |          |          |                      |                          
     |          |          |         +------------------------+           
     |          |          |         |    Network Controllers |                 
     |          |          |         +------------------------+           
     |          |          |                      |                       
     |          |          |                      |                      
   ******      ******     ******               ******                        
  *  5G  *    * IETF *   *  5G  *             * IETF *                       
 *   RAN  *  * Network* *  Core  *           * Network*                      
  *      *    *      *   *      *             *      *                       
   ******      ******     ******               ******   

Legend
             
          ]]></artwork>
        </figure>

        <t>An example of 5G E2E Network Slice is showed in <xref
        target="fig_3gpp_example"/>. Each e2e network slice contains RAN
        slice, CN slice and one or more IETF network Slices. 3GPP identifies
        each e2e network slice using an integer called S-NSSAI. In Figure 4
        there are three instances of e2e network slices which are identified
        by S-NSSAI 01111111, 02222222 and 02333333, respectively. Each
        instance of e2e network slice contains AN slice, CN Slice and one or
        more IETF network slices. For example, e2e network slice 01111111 has
        AN Slice instance 4, CN Slice instance 1 and IETF network slice 6.
        Note that 3GPP does not cover the IETF network slice. See <xref
        target="I-D.ietf-teas-ietf-network-slices"/> for details of IETF
        network slice.</t>

        <t>Note that 3GPP uses the terms NSI and NSSI which are a set of
        network function and required resources (e.g. compute, storage and
        networking resources) which corresponds to network slice Instance,
        whereas S-NSSAI is an integer that identifies the e2e network
        slice.</t>

        <figure align="center" anchor="fig_3gpp_example">
          <name>5G End-to-End Network Slice and its components</name>

          <artwork align="left"><![CDATA[
            +-----------+ +-----------+  +-----------+                    
            |  S-NSSAI  | |  S-NSSAI  |  |  S-NSSAI  |                    
            |  01111111 | |  02222222 |  |  03333333 |                    
            +---|-------+ +---|---|---+  +----|------+                    
                |  +----------+   |           |                              
                V  V              V           V
              *******       ********      ********                        
Core         * NSSI 1 *    * NSSI 2 *    * NSSI 3 *                       
Network       ********      ********      ********                        
                  \              \             /                          
                   \              \           /                           
                   +-----+       +-----+    +-----+                           
Transport          | IETF|       | IETF|    | IETF|
Network            | NS 6|       | NS 7|    | NS 8|                      
                   +-----+       +-----+    +-----+                         
                       \              \   /                               
                        \              \ /                                
  Radio                 ********     ********                             
 Access                * NSSI 4 *   * NSSI 5 *                            
 Network                ********     ********   

Legend
             
          ]]></artwork>
        </figure>

        <t>The following network slice related identifiers in management
        plane, control plane and data(user) plane play an important role in
        end-to- end network slice mapping: <list style="symbols">
            <t>Single Network Slice Selection Assistance Information(S-NSSAI):
            The end-to-end network slice identifier, which is defined in
            [TS23501]; S-NSSAI is used during 3GPP network slice signalling
            process.</t>

            <t>IETF Network Slice Identifier: An identifier allocated by IETF
            Neetwork Slice Controller (NSC) in management plane. In data
            plane, IETF Network Slice Identifier may be instantiated with
            existing data plane identifiers and doesn't necessarily require
            new encapsulation.</t>

            <t>IETF Network Slice Interworking Identifier: Data-plane network
            slice identifier which is used for mapping the end-to-end network
            slice traffic to specific IETF network slice. The IETF Network
            Slice Interworking Identifier is a new concept introduced by this
            draft, which may be instantiated with existing data plane
            identifiers and doesn't necessarily require new encapsulation.</t>
          </list></t>

        <t>Note: the term "IETF Network Slice Interworking Identifier" is
        proposed but requires further discussion.</t>
      </section>
    </section>

    <section title="5G E2E Network Slice Mapping Procedure">
      <t>This section provides a general procedure of network slice
      mapping:</t>

      <t><figure>
          <artwork><![CDATA[
                   +-----------------+
                   |       NSMF      |
                   +-----------------+
        +----------|     S-NSSAI     |----------+
        |          |(e.g. 011111111) |          |
        |          +-----------------+          |
        |                   |                   |
        V                   V                   V   
 +-------------+ +---------------------+ +-------------+
 |  RAN NSSMF  | |       IETF NSC      | |   CN NSSMF  |
 +-------------+ +---------------------+ +-------------+
 |   RAN Slice | | IETF Network Slice  | |   CN Slice  |
 | Identifier  | |     Identifier      | |  Identifier |    
 | (e.g., 4)   | |     (e.g., 6)       | |  (e.g., 1)  |    Management
 +-------------+ +---------------------+ +-------------+      Plane
      |           |                   |           |      -----------------
      |           |                   |           |             
      V           V                   V           V      -----------------
      / \      +-----+             +-----+    +-------+        Data
     /RAN\ ----|  PE |-----...-----| PE  |----|  CN   |        Plane
    /-----\    +-----+             +-----+    +-------+


Figure-6 Relation between IETF and 3GPP Network Slice management
]]></artwork>
        </figure></t>

      <t>1. 3GPP NSMF receives the request from 3GPP CSMF for allocation of a
      network slice instance with certain characteristics.</t>

      <t>2. Based on the service requirement, 3GPP NSMF acquires requirements
      for the end-to-end network slice instance, which is defined in Service
      Profile(<xref target="TS28541"/> section 6.3.3).</t>

      <t>3. Based on Service Profile, 3GPP NSMF determines the network
      function and the required resources in AN, CN and TN networks. It also
      assigns the unique ID S-NSSAI.</t>

      <t>4. 3GPP NSMF sends a request to AN NSSMF for creation of AN Slice,
      which is out of the scope of this document.</t>

      <t>5. 3GPP NSMF sends a request to CN NSSMF for creation of CN Slice,
      which is out of the scope of this document.</t>

      <t>6. 3GPP NSMF sends a request to IETF Network Slice Controller (NSC)
      (acting as an NSSMF for transport network, from the perspective of the
      3GPP Management System)) for creation of IETF Network Slice. The request
      contains attributes such as endpoints (based on the information from
      EP_Transport IOC), required SLA along with other IETF network slice
      attributes. It also cotains mapping informatin for IETF Network Slice
      Interworking Identifier.</t>

      <t>7. IETF NSC realizes the IETF network slice which satisfies the
      requirements of the IETF network slice service requested between the
      specified endpoints (RAN/ CN edge nodes). It may assign IETF slice ID
      and send it to 3GPP NSMF.</t>

      <t>8. 3GPP NSMF maintains the mapping relationship between S-NSSAI and
      IETF network slice service ID;</t>

      <t>9. When the 3GPP User Equipment (UE) appears, as part of 5G
      signalling, it may request to be connected to specific e2e network slice
      identified by S-NASSI. Then a GTP tunnel (which is UDP/IP-based) will be
      created.</t>

      <t>10. UE starts sending traffic to AN and the edge of AN encapsulates
      the packet into a GTP tunnel, adding a Slice Interworking Identifier
      according to the selected S-NSSAI and send it to the transport
      network.</t>

      <t>11. The transport network edge nodes parse the Slice Interworking
      identifier in the received packet and maps the packet to the
      corresponding IETF network slice. It may encapsulate the packet with
      slice specific identifiers for enforcing the SLA of IETF Network Slice
      service in the in transport network.</t>
    </section>

    <section title="5G E2E Network Slice Mapping in Management Plane">
      <t>The transport network management Plane maintains the interface
      between 3GPP NSMF and TN NSSMF, which 1) In order to guarantees that
      IETF network slice could satisfy the requirements of connection between
      AN and CN, requirement parameters are necessary for ietf network slice
      northbound interface ; 2) builds up the mapping relationship between NSI
      identifier and IETF network slice service ID;</t>

      <t>Service Profile defined in<xref target="TS28541"/> represents the
      requirement of end-to-end network slice instance in 5G network.
      Parameters defined in Service Profile include Latency, resource sharing
      level, availability and so on. How to decompose the end-to-end
      requirement to the transport network requirement is one of the key
      issues in Network slice requirement mapping. GSMA (Global System for
      Mobile Communications Association) defines the <xref target="GST"/> to
      indicate the network slice requirement from the view of service
      provider. <xref target="I-D.ietf-teas-ietf-network-slice-use-cases"/>
      analyzes the parameters of GST and categorize the parameters into three
      classes, including the attributes with direct impact on the IETF network
      slice definition. It is a good start for selecting the transport network
      relevant parameters in order to define Network Slice Profile for
      Transport Network. Network slice requirement parameters are also
      necessary for the definition of transport network northbound interface.
      NSMF delivers SLA/QoS related parameters and mapping related parameters
      to IETF controller through NBI;</t>

      <t>3GPP TN NSSMF will request the IETF Network Slice service adding in
      the IETF Network Slice service request some slice identifier to the IETF
      NSC. The mapping relationship between NSI identifier and IETF Network
      Slice service identifier could be maintained in both 3GPP NSMF and IETF
      NSC.</t>

      <t/>

      <t>Then, at the time of provisioning a 3GPP slice, it is required to
      provide slice connectivity constructs by means of IETF network slices.
      Then it is necessary to bind two different endpoints, as depicted in
      Figure 2:</t>

      <t><list style="symbols">
          <t>Mapping of EP_Transport (as defined by [TS28.541]) to the
          endpoint at the CE side o f the IETF network slice. This is
          necessary because the IETF Network Slice Controller (NSC) will
          receive as input for the IETF network slice service the set of
          endpoints at CE side to be interconnected</t>

          <t>Mapping of the endpoints at both CE and PE side. The endpoint at
          PE side should be elicited by some means by the IETF NSC, in order
          to establish and set up the connectivity construct intended for the
          customer slice request, according to the SLOs and SLEs received from
          the higher level system.</t>
        </list><figure>
          <artwork><![CDATA[
      3GPP concern

      -----------                                            ---------
               /                                            /
              /                                            /
             O EP_Transport_left       EP_Transport_right O
            /A                                           /A
           / |                                          / |
      -----  |                                         ---|-------
             |                                            |
             |                                            |
      .......|............................................|..........
             |                                            |
             |                                            |
             |                                            |
      -------|--       ----------            ----------   |  -------
             | /      /        /  ____      /        /    | /
             V/      /        /  (    )    /        /     V/
             O<---->O        0==(      )==0        O<---->O
            /      /        /    (____)  /        /      /
           /      /        /            /        /      /
      -----      ----------            ----------      ----------
      CE_left     PE_left               PE_right       CE_right

      IETF concern]]></artwork>
        </figure></t>

      <t/>

      <section title="Mapping EP_transport to IETF NS CE endpoints">
        <t>The 3GPP Management system provides the EP_Transport IOC to extend
        the slice awareness to the transport network. The EP_Transport IOC
        contains parameters as IP address, additional identifiers (i.e., vlan
        tag, MPLS label, etc), and associated QoS profile. This IOC is related
        to the endpoints of the 3GPP managed functions (detailed in the
        EP_Application IOC).</t>

        <t>The information captured in the EP_Transport IOC (as part of the
        3GPP concern) should be translated into the CE related parameters (as
        part of the IETF concern). There will be cases where such translation
        is straightforward, as for instance, when the 3GPP managed functions
        run on monolithic, purpose- specific network elements, in the way that
        the IP address attribute from the EP_Transport IOC directly
        corresponds to the IP address of an interface of such network element.
        In this case, the information on EP_Transport IOC can be directly
        passed to the IETF NSC through the NBI, even though some additional
        information could be yet required, not being defined yet on 3GPP
        specifications (e.g., the mask applicable to the IP address field on
        EP_Transport). Note that information gaps are further detailed in a
        summary section at the end of this document.</t>

        <t>However, there could be other cases where such a relationship is
        not straightforward. This could be the case of virtualized 3GPP
        managed functions that could be instantiated on a general-purpose
        bare-metal server or in a data center. In these other cases it is
        necessary to define additional means for eliciting the endpoint at the
        CE side corresponding to the endpoint of the 3GPP-related
        function.</t>

        <t>With solely EP_Transport characterization in 3GPP as today (i.e.,
        according to 3GPP Release 16 specifications), we could expect the NS
        CE endpoint being identified by a combination of IP address and some
        additional information such as vlan tag, MPLS label or SR SID that
        could discriminate against a certain logical interface. The next hop
        router information is related to the next hop view from the
        perspective of the 3GPP entity part of the slice, then providing hints
        for determining the slice endpoint at the other side of the slice
        boundary. Finally, the QoS profile, if present, helps to determine
        configurations needed at the PE side to respect the SLOs in the
        connection between CEs slice endpoints.</t>
      </section>

      <section title="Mapping IETF NS CE to PE endpoints">
        <t>As described in [I-D.ietf-teas-ietf-network-slices], there are
        different potential endpoint positions for an IETF NS.</t>

        <t><figure>
            <artwork><![CDATA[              |<---------------------- (1) ---------------------->|
              |                                                   |
              | |<-------------------- (2) -------------------->| |
              | |                                               | |
              | |        |<----------- (3) ----------->|        | |
              | |        |                             |        | |
              | |        |  |<-------- (4) -------->|  |        | |
              | |        |  |                       |  |        | |
              V V   AC   V  V                       V  V   AC   V V
          +-----+   |    +-----+                 +-----+    |   +-----+
          |     |--------|     |                 |     |--------|     |
          | CE1 |   |    | PE1 |. . . . . . . . .| PE2 |    |   | CE2 |
          |     |--------|     |                 |     |--------|     |
          +-----+   |    +-----+                 +-----+    |   +-----+
             ^              ^                       ^              ^
             |              |                       |              |
             |              |                       |              |
          Customer       Provider                Provider       Customer
          Edge 1         Edge 1                  Edge 2         Edge 2


                  Figure 7: IETF Network Slice endpoints]]></artwork>
          </figure>The information that is passed to the IETF NSC in terms of
        endpoints is the information relative to the CE side, which is the one
        known by the slice customer (i.e., the 3GPP Management system, that
        corresponds to the 3GPP managed functions). From that information, the
        IETF NSC needs to infer the corresponding endpoint at the PE side, in
        order to setup the desired connectivity constructs with the SLOs
        indicated in the request.</t>

        <t>Being the IETF slice request a technology-agnostic procedure, the
        identification of the slice endpoints at the PE side should leverage
        on generic information passed through the NBI to the IETF NSC.</t>

        <t/>
      </section>
    </section>

    <section title="5G E2E Network Slice Mapping in Control Plane">
      <t>There is no explicit interaction between transport network and AN/CN
      in the control plane, but the S-NSSAI defined in <xref
      target="TS23501"/> is treated as the end-to-end network slice identifier
      in the control plane of AN and CN, which is used in UE registration and
      PDU session setup. In this draft, it is assumed that there is a
      correspondence between S-NSSAI and the IETF Network Slice service
      identifier in the management plane.</t>

      <t>Note: to ensure consistency with NBI YANG model (i.e., service
      tag)</t>
    </section>

    <section title="5G E2E Network Slice Mapping in Data Plane">
      <t>If multiple network slices are carried through one physical interface
      between AN/CN and TN, IETF Network Slice Interworking ID in the data
      plane needs to be defined. If different network slices are transported
      through different physical interfaces, Network Slices could be
      distinguished by the interface directly. Thus IETF Network Slice
      Interworking ID is not the only option for network slice mapping, while
      it may help in introducing new network slices.</t>

      <section title="Data Plane Mapping Considerations">
        <t/>

        <t>The following picture shows the end-to-end network slice in data
        plane&#65288;taking the IETF network slice between RAN and UPF as an
        exmplae&#65289;:</t>

        <t><figure>
            <artwork><![CDATA[+--+       +-----+                           +----------------+
|UE|- - - -|(R)AN|---------------------------|       UPF      |
+--+       +-----+                           +----------------+
 |<----AN NS---->|<----------TN NS---------->|<----CN NS----->|     

]]></artwork>
          </figure>The mapping between 3GPP slice and transport slice in user
        plane could happens in:</t>

        <t>(R)AN: User data goes from (radio) access network to transport
        network</t>

        <t>UPF: User data goes from core network functions to transport
        network</t>

        <t>The following picture shows the user plane protocol stack in
        end-to-end 5G system.<figure>
            <artwork><![CDATA[+-----------+                    |                  |               |
|Application+--------------------|------------------|---------------|
+-----------+                    |                  | +-----------+ |
| PDU Layer +--------------------|------------------|-| PDU Layer | |
+-----------+   +-------------+  |  +-------------+ | +-----------+ |
|           |   | ___Relay___ |--|--| ___Relay___ |-|-|           | |
|           |   |     \/ GTP-U|--|--|GTP-U\/ GTP-U|-|-|   GTP-U   | |
|   5G-AN   |   |5G-AN +------+  |  +------+------+ | +-----------+ |
|  Protocol |   |Protoc|UDP/IP|--|--|UDP/IP|UDP/IP|-|-|   UDP/IP  | |
|   Layers  |   |Layers+------+  |  +------+------+ | +-----------+ |
|           |   |      |  L2  |--|--|  L2  |  L2  |-|-|     L2    | |
|           |   |      +------+  |  +------+------+ | +-----------+ |
|           |   |      |  L1  |--|--|  L1  |  L1  |-|-|     L1    | |
+-----------+   +-------------+  |  +-------------+ | +-----------+ |
     UE              5G-AN       |        UPF       |      UPF      |
                                 N3                 N9              N6
]]></artwork>
          </figure></t>

        <t>The following figure shows the typical encapsulation in N3
        interface.</t>

        <t><figure>
            <artwork><![CDATA[+------------------------+
| Application Protocols  |     
+------------------------+      
|       IP (User)        |  
+------------------------+     
|          GTP           |    
+------------------------+      
|          UDP           |         
+------------------------+
|          IP            |
+------------------------+
|       Ethernet         |
+------------------------+]]></artwork>
          </figure></t>

        <t>There are several options in the encapsulation that could be used
        in data plane of network slice mapping.</t>
      </section>

      <section anchor="section_overview_ins_realization"
               title="Methods for Mapping between 3GPP E2E network slice and IETF network slice">
        <t>Referring to <xref target="fig_d_ran"/>, <xref
        target="fig_centralized_ran"/> and <xref target="fig_c_ran"/>, a 5G
        end-to-end network slice might have one or more IETF network slices.
        <xref target="fig_typical_ins_in_3gpp"/> is a general representation
        of any of transport networks in 5G end-to-end network slice where the
        IETF network slice provides the connectivity between network functions
        NF1 and NF2 to satisfy the specific SLO/SLE. For example, <xref
        target="fig_typical_ins_in_3gpp"/> could represent IETF network slice
        INS1 where connectivity needed between network functions CU and UPF or
        it could represent IETF network slice INS4 between network functions
        DU and CU.</t>

        <t>Suppose the network function NF1 sends the traffic to NF2. The data
        plane mapping is mainly about how the identification of 3GPP network
        slice is conveyed and represented on data path, and how the provider
        network PE nodes map the received traffic in context of 5G end-to-end
        network slice to the IETF network slice services. It is crucial for PE
        nodes to be able to map the traffic to the appropriate IETF network
        slice so as to enforce the SLO/SLE policy.</t>

        <figure align="center" anchor="fig_typical_ins_in_3gpp">
          <name>Typical IETF Network Slice in 3GPP Network</name>

          <artwork align="left"><![CDATA[

         <------ IETF Network Slice Service ------->

              AC         .-------.           AC 
              |        ,'         `.         |             
              |      ,'             `.       |             
   --------   V   -------          -------   V   --------
   |      |       |     |          |     |       |      |
   | NF1  |-------| PE1 |          | PE2 |-------| NF2  |
   |      |-------|     |          |     |       |      |
   --------       ------- Provider -------       -------- 
                      `.  Network  ,'
                        `.       ,'
                          -------
          
        ]]></artwork>
        </figure>

        <t>To provide an overview of various mechanisms of mapping 5G E2E
        network slice to IETF network slices, we focus on IETF network slice
        INS1 in <xref target="fig_c_ran"/> where it provides the connectivity
        between network functions CU and UPF. <xref
        target="fig_typical_ins_in_3gpp_2"/> shows this scenario. Although the
        various mapping techniques considered in this section is for IETF
        network slice INS1, they are all applicable to other IETF network
        slices of <xref target="fig_d_ran"/>, <xref
        target="fig_centralized_ran"/> and <xref target="fig_c_ran"/>, i.e.,
        INS2, INS3 and INS4.</t>

        <t>The IETF network slice INS1 which provides the connectivity between
        SDP1 and SPD2. These SDPs are the N3 interfaces on CU and UPF,
        respectively. As shown in <xref
        target="fig_typical_ins_in_3gpp_2"/>(A) and <xref
        target="fig_typical_ins_in_3gpp_2"/>(B), the SDPs could be either
        loopback interface or a physical interface on CU and UPF. In rest of
        this section only case (A) is considered although the various mapping
        methods are identically applicable to both cases.</t>

        <figure align="center" anchor="fig_typical_ins_in_3gpp_2">
          <name>Representation of a Typical IETF Network Slice in 3GPP
          Network</name>

          <artwork align="left"><![CDATA[

        <------- IETF Network Slice Service -------->
                            INS1
      SDP1                                        SDP2
    (N3 I/F)                                    (N3 I/F)
       |                 .-------.                  | 
       |               ,'         `.                |      
       v             ,'             `.              V       
   --------       -------          -------       --------    
   |   o=============================================o  | 
   |      |       | PE1 |          | PE2 |       |      |
   | CU   |       |     |          |     |       | UPF  |
   --------       ------- Provider -------       --------  
                      `.  Network  ,'
                        `.       ,'
                          -------   

                            (A)


          <----- IETF Network Slice Service ----->
                            INS1
         SDP1                                   SDP2
       (N3 I/F)                               (N3 I/F)
          |              .-------.               | 
          |            ,'         `.             |      
          v          ,'             `.           V       
   --------       -------          -------       --------    
   |      *======================================*      | 
   |      |       | PE1 |          | PE2 |       |      |
   | CU   |       |     |          |     |       | UPF  |
   --------       ------- Provider -------       --------  
                      `.  Network  ,'
                        `.       ,'
                          -------   

                            (B)
 Legend:
   *  SDP (N3 address as CU or UPF IP interface)
   O  SDP (N3 address as CU or UPF IP interface)
 ==== IETF Network Slice Service          
        ]]></artwork>
        </figure>

        <t>The section covers the following techniques which can be used for
        mapping between 5G E2E network slice and IETF network slice services.
        Note that these techniques might also be used by IETF network slice
        controller (NSC) to influence the realization of the IETF network
        slice services. The latter case is out of scope of the current draft:
        <list style="symbols">
            <t>Mapping based on VLAN</t>

            <t>Mapping based on MPLS label</t>

            <t>Mapping based on SRv6 SID</t>

            <t>Mapping based on Policy Based Routing (PBR)</t>

            <t>Mapping based on UDP source port</t>
          </list>It should be noted that the first three mapping mechanisms
        are briefly mentioned in [3GPP TS 28.541]. </t>

        <section anchor="section_vlan_handoff"
                 title="Mapping based on VLAN ID">
          <t>In some scenarios, it would be possible for provider edge (PE)
          nodes to infer the identification of the 5G E2E network slices from
          the VLAN ID carried in the data path traffic, and map the traffic to
          the corresponding IETF network slice. As shown in <xref
          target="fig_vlan_handoff"/>, the IETF Network slice INS1 between
          network functions CU and UPF can be mapped using the VLAN ID. In
          this scenario, the VLANs assigned by network functions CU and UPF
          are used for the handoff to the provider network. </t>

          <figure align="center" anchor="fig_vlan_handoff">
            <name>VLAN based IETF Network Slice Mapping</name>

            <artwork align="left"><![CDATA[
      <-------------------- INS1 ------------------->

      VLAN based Handoff    INS1 
              |              |
              |              |                  
     N3 I/F   |          .---|---.                N3 I/F 
       |      |        ,'    |    `.                |      
       V      V      ,'      V      `.              V       
   --------       -------          -------       --------    
   |   O..........+======================+..........O   | 
   |      |       | PE1 |          | PE2 |       |      |
   | CU   |       |     |          |     |       | UPF  |
   --------       ------- Provider -------       --------  
                      `.  Network  ,'
                        `.       ,'
                          -------   

                            (A)
 Legend:
   O  SDP (N3 address)
   +  Access points to provider network 
   ... VLAN hand-off
   === INS1 in provider network 
          
        ]]></artwork>
          </figure>
        </section>

        <section anchor="section_mpls_label_handoff"
                 title="Mapping based on MPLS Label">
          <t>This section describes an optional solution for mapping the 3GPP
          E2E network slice traffic to IETF network slices based on MPLS
          labels. The MPLS labels carried in the packets sent from CU to UPF
          can be used by the provider edge (PE) nodes to infer the
          identification of the 5G E2E network slices and map the packet to
          the corresponding IETF network slice. <xref
          target="fig_mpls_label_handoff"/> shows an example where the 5G E2E
          network slice is mapped to IETF network slice INS1 using the MPLS
          label.</t>

          <t>In this case, the MPLS label is used for the handoff to the
          provider network.</t>

          <figure align="center" anchor="fig_mpls_label_handoff">
            <name>MPLS lable based IETF Network Slice Mapping</name>

            <artwork align="left"><![CDATA[
      <-------------------- INS1 ------------------->

        MPLS tunnel (represented by MPLS label)  
              |              
              |                                
     N3 I/F   |          .-------.                N3 I/F 
       |      |        ,'         `.                |      
       V      V      ,'             `.              V       
   --------       -------          -------       --------    
   |   *=============================================*  | 
   |      |       | PE1 |          | PE2 |       |      |
   | CU   |       |     |          |     |       | UPF  |
   --------       ------- Provider -------       --------  
                      `.  Network  ,'
                        `.       ,'
                          -------   

                            (A)
 Legend:
      * SDP1 and SPD2 (N3 Address)
      === MPLS tunnel between SDP1 and SDP2
          
        ]]></artwork>
          </figure>
        </section>

        <section anchor="section_srv6_label_handoff"
                 title="Mapping based on SRv6 SID">
          <t>This section describes an optional solution for mapping the 3GPP
          E2E network slice traffic to IETF network slices based on SRv6 SIDs.
          This solution is similar to the mapping based on MPLS label but for
          IPv6 networks. As shown in <xref target="fig_srv6_label_handoff"/>,
          the SRv6 SIDs is added by CU or UPF to the data path traffic between
          SDP1 and SPD2. The SRv6 SIDs can be used by the provider edge (PE)
          nodes to infer the identification of the 5G E2E network slices and
          map the traffic to the corresponding IETF network slice. </t>

          <t>In this solution, the identification of the 5G E2E network slice
          may be embedded into IPv6 SIDs, where the 32-bit 3GPP network slice
          identification is mapped into the 128-bit IPv6 SID, thus the SRv6
          SID is used for the handoff to the provider network.</t>

          <figure align="center" anchor="fig_srv6_label_handoff">
            <name>SRv6 SID based IETF Network Slice Mapping</name>

            <artwork align="left"><![CDATA[
      <-------------------- INS1 ------------------->

         SRv6 tunnel (represented by SRv6 SID) 
              |              
              |                                
     N3 I/F   |          .-------.                N3 I/F 
       |      |        ,'         `.                |      
       V      V      ,'             `.              V       
   --------       -------          -------       --------    
   |   *=============================================*  | 
   |      |       | PE1 |          | PE2 |       |      |
   | CU   |       |     |          |     |       | UPF  |
   --------       ------- Provider -------       --------  
                      `.  Network  ,'
                        `.       ,'
                          -------   

                            (A)
 Legend:
      * SDP1 and SPD2 (N3 address)
      === SRv6 tunnel between SDP1 and SDP2
          
        ]]></artwork>
          </figure>
        </section>

        <section anchor="section_pbr"
                 title="Mapping based on Policy Based Routing (PBR)">
          <t>This section provides an optional solution for mapping the 3GPP
          E2E network slice traffic to IETF network slices. As shown in <xref
          target="fig_pbr"/>, in some deployments of the 5G network slices, it
          would be possible for provider edge (PE) nodes to infer the
          identification of the 3GPP E2E network slice from the content of the
          IP data packet between CU and UPF. In these cases, the PE nodes can
          identify the 3GPP E2E network slice using any combination of the
          following information and then map them to IETF network slice
          services: <list style="symbols">
              <t>Source N3 IP address</t>

              <t>Destination N3 IP address</t>

              <t>Ingress interface</t>

              <t>DSCP</t>

              <t>Other information in the packet</t>
            </list></t>

          <t>Once the PE nodes receives the IP packets, it may apply the
          policy-based routing (PBR) to the packet to map the traffic of
          specific 3GPP E2E network slice to the corresponding IETF network
          slices in the provider network. The details of this solution is
          beyond scope of this draft. </t>

          <figure align="center" anchor="fig_pbr">
            <name>Policy Based Routing (PBR) based IETF Network Slice
            Mapping</name>

            <artwork align="left"><![CDATA[
      <-------------------- INS1 ------------------->

                 PBR        INS1        PBR     
          enforcement    realization    enforcement
                  |          |           |
                  |          |           |      
     N3 I/F       |      .---|---.       |        N3 I/F 
       |          |    ,'    |    `.     |          |      
       V          V  ,'      V      `.   V          V       
   --------       -------          -------       --------    
   |   O..........+======================+..........O   | 
   |      |       | PE1 |          | PE2 |       |      |
   | CU   |       |     |          |     |       | UPF  |
   --------       ------- Provider -------       --------  
                      `.  Network  ,'
                        `.       ,'
                          -------   
 Legend:
   O  SDP ((N3 interface)
   +  Access points of IP/MPLS Services when PBR is enforced
   === IP/MPLS service  
          
        ]]></artwork>
          </figure>
        </section>

        <section anchor="section_gtp" title="Mapping based on UDP Source Port">
          <t>This section provides an optional solution for mapping the 3GPP
          E2E network slice traffic to IETF network slices. In some
          deployments of the 3GPP E2E network slices, it might be possible for
          PE nodes to infer the identification of the 3GPP E2E network slice
          based on the information of the GTP tunnels. As shown in <xref
          target="fig_gtp"/>, the source UDP port of the data packet may be
          used to infer the identification of 3GPP network slices. In this
          case, a mapping table between the identification of 5G network slice
          and the source UDP port needs to be maintained by network functions
          CU, UPF and the PE nodes. The details of this solution is described
          in [draft-ietf-dmm-tn-aware-mobility].</t>

          <figure align="center" anchor="fig_gtp">
            <name>UDP source port soluiton for IETF Network Slice
            Mapping</name>

            <artwork align="left"><![CDATA[
      <-------------------- INS1 ------------------->

      GTP tunnels  
              |         
              |                
     N3 I/F   |          .-------.                N3 I/F 
       |      |        ,'         `.                |      
       V      V      ,'             `.              V       
   --------       -------          -------       --------    
   |   *=============================================*  | 
   |   *=============================================*  | 
   |      |       | PE1 |          | PE2 |       |      |
   | CU   |       |     |          |     |       | UPF  |
   --------       ------- Provider -------       --------  
                      `.  Network  ,'
                        `.       ,'
                          -------   
 Legend:
   *  SDP (N3 address)
      === GTP tunnels in context of IETF network slice INS1

        ]]></artwork>
          </figure>
        </section>

        <section anchor="section_vnf_pnf"
                 title="Consideration of the Virtual Network Functions (VNF)">
          <t>In some 5G network slice deployments, it might be beneficial to
          deploy RAN and Core network functions such as DU, CU and UPF as
          virtual network functions (VNF) inside a data center (DC). As an
          example, consider Figure 14 where the CU and UPF have been deployed
          as VNF. The definition of the IETF network slice service INS1 stays
          identical to its PNF counterpart (physical network function) which
          are discussed in sections 7.2.1 to 7.2.5, i.e., INS1 is an IETF
          network slice service which provides the connectivity between SDP1
          and SDP2 to satisfy certain SLO/SLE.</t>

          <t>However, the mapping of INS1 might be different from previous use
          cases. <xref target="fig_vnf_pnf"/> shows one possible solution for
          mapping of INS1 where the 5G E2E network slice is first mapped
          inside the data center and then mapped to provider network PE nodes.
          One potential mapping in the data center is to use VxLAN ID to infer
          the identification of 5G E2E network slice inside the data center,
          and any of the options described in 7.2.1 to 7.2.5 in the provider
          network PE1 and PE2. </t>

          <figure align="center" anchor="fig_vnf_pnf">
            <name>VNF Consideration for IETF Network Slice Mapping</name>

            <artwork align="left"><![CDATA[
      <-------------------- INS1 ------------------->

        Mapping of INS1       Mapping of INS1
        in data center        in provider network  
                |              |            
       SDP1     |              |                     SDP2  
        |       |          .---|---.                  |
        V       V        ,'    |    `.                V     
 |------------|        ,'      V      `.        |------------|      
 |  --------  |     -------          -------    |  --------  |  
 |  |   O...........+======================+..........O   |  |
 |  |      |  |     | PE1 |          | PE2 |    |  |      |  |
 |  | CU   |  |     |     |          |     |    |  | UPF  |  |
 |  --------  |     ------- Provider -------    |  -------   |
 |            |         `.  Network  ,'         |            | 
 |------------|           `.       ,'           |------------|
      DC1                   -------                   DC2

 Legend:
      DC  Data Center
      O   SDP (N3 address)
      === Mapping of INS1 on Provider Network PE nodes
      ... Mapping of INS1 in data centers         
        ]]></artwork>
          </figure>
        </section>
      </section>
    </section>

    <section title="Example of IETF Network Slice request through IETF Network Slice NBI">
      <section title="Example according to CE-mode">
        <t>This example considers the request of a slice for realizing the
        F1-U interface between a DU and a CU-UP elements (i.e., INS4 in
        previous <xref target="fig_c_ran"/>). Note that the example is equally
        valid for the realization of any other case.</t>

        <t>The example follows the CE-mode as described in Figure X1.</t>

        <t>The 3GPP Management System is expected to handle different IOCs for
        both DU and CU-UP. For each of those 3GPP network entities, one of the
        IOCs is the EP_RP, which describes each of the end-points in the
        association between 3GPP core entities, and the other IOC is the
        EP_Transport, which provides information about the point of attachment
        of each 3GPP core entity to the transport network. Both objects are
        cross-referenced, so it is possible to get the information of one of
        them from the other.</t>

        <t>Figure X2 shows the information provided at the DU side
        corresponding to the intended association with the CU-UP at the other
        end.</t>

        <t>Similarly, at CU-UP side the following objects are provided for
        setting up the network slice service towards DU, as represented in
        Figure X3.</t>

        <t>This is the basic information from where deriving the set of
        parameters feeding the NS NBI model.</t>

        <t>According to this example, the following mapping could be
        performed.</t>

        <t><list style="symbols">
            <t>SDPs: the SDPs in this example correspond to the IP addresses
            of the 3GPP core entities, thus 100.1.1.2 at the DU1 side and
            1.1.1.2 at the CU-UP1 side, both contained in the EP_RP
            object.</t>

            <t>SLO / SLE policy: the SLO policy can be derived from the QoS
            profile indicated in the EP_Transport object. SLE information are
            not directly expressed in 3GPP IOCs, then, if needed, SLE
            information should be complemented by other means (e.g., the 3GPP
            Slice Profile could provide indication of high reliability which
            could be translated to SLE values in the NBI YANG model internally
            to the NSC).</t>

            <t>Peer SAP: the Next Hop info parameter in EP_Transport object
            can provide information about the SAP at the PE side, based on the
            IP address provided.</t>

            <t>AC: the conjugation of the IP address in the EP_Transport
            object, plus the information of the logical interface type and its
            identifier also in EP_Transport, can assist on determining the
            specific AC used for the network slice.</t>
          </list></t>

        <t>Further parameters can be filled in the NS
        draft-ietf-teas-ietf-network-slice-nbi-yang model from the information
        provided. For instance, since there is one single pair of EP_Transport
        objects, one on each end of the intended slice service, the
        connectivity construct can be requested as p2p. Since the ranges of IP
        address of both DU1 and CU-UP1 could pertain to different block of
        prefixes, the NSC can take the decision of realizing the network slice
        as a routed service. Here is important to remark that the IOCs from
        3GPP do not provide any information regarding the mask applied to each
        prefix, so this can produce inconsistencies in the interpretation of
        the information received. Clearly this is a gap necessary to be
        solved. Corresponding enhancement of 3GPP IM/DM TS28.541 was submitted
        with LS from ORAN S-2022003 and at the moment of the work on current
        draft there is ongoing review of this LS in SA5.</t>

        <t>In addition to that, the logical interface type and its identifier
        can be used as match criteria for mapping traffic between DU1 and
        CU-UP1 on the intended slice service.</t>

        <t>As such, the draft-ietf-teas-ietf-network-slice-nbi-yang model can
        result in the following example:</t>

        <t>Gaps example 1</t>

        <t>- No indication of service tag-type coming from 3GPP (so no notion
        if the service is L2, L3, etc)</t>

        <t>- Slo-sle template should be applied per connectivity construct
        since the only explicit information related to QoS is the one embedded
        in EP_Transport</t>

        <t>- To check if it is a problem to use an IP address coded as string
        at the time of indicating peer-SAP id</t>
      </section>
    </section>

    <section title="Gap Analysis">
      <t>The way in which 3GPP is characterizing the slice endpoint (i.e.,
      EP_Transport) is based on Layer 3 information (e.g., the IP Address).
      However the information provided seems not to be sufficient for
      instructing the IETF Network Slice Controller for the realization of the
      IETF NEtwork Slice. For instance, some basic information such as the
      mask associated to the IP address of the EP_Transport is not specified,
      as well as other kind of parameters like the connection MTU or the
      connectivity type (unicast, multicast, etc). More sophisticated
      information could be required as well, like the level of isolation or
      protection necessary for the intended slice.</t>

      <t>In the case in which the 3GPP managed function runs on a purpose-
      specific network element, the IP address specified in the EP_Transport
      IOC serves as reference to identify the CE endpoint, assuming the
      endpoint of the CE has been configured with that IP address. With that
      information (together with the logical interface ID) should be
      sufficient for the IETF NSC to identify the counterpart endpoint at the
      PE side, and configuring it accordingly (e.g., with a compatible IP
      address) for setting up the slice end-to-end. Similarly, the next hop
      information in EP_Transport can help validate the end-to-end slice
      between PE endpoints.</t>

      <t>In the case in which the 3GPP managed function is instantiated as a
      virtualized network function, the direct association between the IP
      address of EP_Transport and the actual endpoint mapped at the CE is not
      so clear. It could be the case, for instance when the virtualized
      network function is instantiated at the internal of a data center, that
      the CE facing the PE is far from the point where the function is
      deployed, being that connectivity extended through the internals of the
      data center (or by some internal configuration of a virtual switch in a
      server). In these situations additional information is needed for
      accomplishing the end-to-end connection.</t>

      <t>At the same time, [TS28.541] IOC contains useful parameters to be
      used in IETF Network Slice creation mechanism and enreaching IETF
      Network Slice model. The following parameters may be suggested as a
      candidates to the correlation of the IETF Network Slice parameters and
      IETF Network Slice model enreachments:</t>

      <t><list style="symbols">
          <t>For the latency, dLThptPerSliceSubnet, uLThptPerSliceSubnet,
          reliability and delayTolerance attributes, the following NRM apply
          (with reference to the section in that specification):</t>

          <t><list style="symbols">
              <t>CNSliceSubnetProfile (section 6.3.22 in [TS28.541])</t>

              <t>RANSliceSubnetProfile (section 6.3.23 in [TS28.541])</t>

              <t>TopSliceSubnetProfile (section 6.3.24 in [TS28.541])</t>
            </list></t>

          <t>For the qosProfile attribute, the NRM which applies is
          EP_Transport (detailed in section 6.3.17 in [TS28.541])</t>
        </list></t>

      <t/>
    </section>

    <section anchor="IANA" title="IANA Considerations">
      <t>This document makes no request of IANA.</t>

      <t>Note to RFC Editor: this section may be removed on publication as an
      RFC.</t>
    </section>

    <section anchor="Security" title="Security Considerations">
      <t/>
    </section>

    <section anchor="Acknowledgements" title="Acknowledgements">
      <t>The work of Luis M. Contreras has been partially funded by the
      European Commission under Horizon 2020 project Int5Gent (grant agreement
      957403)</t>
    </section>

    <section title="Annex 1: 3GPP Network Slice Mapping Parameters">
      <t>The network slice concept was introduced in 3GPP specifications from
      the first 5G release, corresponding to Release 15. As captured in
      [TS23.501], a network slice represents a logical network providing
      specific network capabilities and network characteristics.</t>

      <t>To make slicing a reality, every technical domain is split into one
      or more logical network partitions, each referred to as a network slice
      subnet. The definition of multiple slice subnets on a single domain
      allows each segment to provide differentiated behaviors, in terms of
      functionality and/or performance, tailored to some specific needs. The
      stitching of slice subnets across the RAN, CN and TN results in the
      definition of 5G network slices in 3GPP.</t>

      <t>From a management viewpoint, the concept of network slice subnet
      represents an independently manageable yet composable portion of a
      network slice. The rules for the definition of network slice subnets and
      their composition into network slices are detailed in the 5G Network
      Resource Model (NRM) [TS28.541], specifically in the Network Slice NRM
      fragment. This fragment captures the information model of 5G network
      slicing, which specifies the relationships between different slicing
      related managed entities, which is represented as Information Object
      Class (IOC). The IOC that have been defined including: NetworkSlice IOC,
      NetworkSliceSubnet IOC, ManagedFunction IOC and EP_Transport IOC.</t>

      <t>Information Object Class EP_Transport [TS28.541 Clause 6.3.18]
      represents logical interface parameters of 3GPP subsystems, providing
      specific network capabilities and network characteristics. Relationships
      of Transport slicing-related 3GPP IOCs and IETF domain represented on
      the Figure X for NgU/N3 slices with traffic between 3GPP CU-UP (or ORAN)
      CU-UP and 3GPP UPF, while the Figure Y similarly represents F1-U slices
      with traffic between 3GPP (or ORAN) DU and 3GPP (or ORAN) CU-UP .</t>

      <t><figure>
          <artwork><![CDATA[                +----------------------------------+
                |      Slices in 3GPP domain       |
                |  Model defined in IOC TS 28.541  |
                |          NgU/N3 slices           |
                +----+--------------------------+--+
   +-----------------|+                         |
   |   3GPP CU-UP /  ||                       +-|---------------+
   | ORAN O-CU-UP #1 ||        .-----.        | |3GPP (i)UPF #1 |
   | +---------------V|      ,'  TN   `.      +-V--------------+|
   | | EP_NgU link to |     |  domain   |     | EP_N3 link to  ||
   | |     UPF #1     |    ;             :    |    CU-UP #1    ||
   | |+---------------|    ;  .-------.  :    +---------------+||
   | ||EP_Transport 10+------(Slice 10 )------|EP_Transport 10|||
   | |+---------------|   |   `-------'   |   +---------------+||
   | |                |   |               |   |                ||
   | |+---------------|   :   .-------.   ;   +----------------||
   | ||EP_Transport 20+------(Slice 20 )------|EP_Transport 20 ||
   | |+---------------|A   :  `-------'  ;   A+----------------||
   | +----------------||    |           |    |+----------------+|
   |            . . . ||     |         |     || . . .           |
   | +----------------||      `.     ,'      |+----------------+|
   | | EP_NgU link to ||        `---'        || EP_NgU link to ||
   | |     UPF #N     ||                     ||   CU-UP #N     ||
   | +----------------||                     |+----------------+|
   +------------------+|                     |+-----------------+
                       |                     |
                +------+---------------------+--------+
                |    logical transport interfaces     |
                |     e.g. GTP-U, IPSec endpoint      |
                +-------------------------------------+

Figure 5-1 Slicing example on the NgU/N3 interface
]]></artwork>
        </figure></t>

      <t><figure>
          <artwork><![CDATA[
                 +----------------------------------+
                 |      Slices in 3GPP domain       |
                 |  Model defined in IOC TS 28.541  |
                 |            F1-U slices           |
                 +-+-------------------------+------+
    +--------------|+                       +|-----------------+
    |  3GPP DU /   ||                       ||  3GPP CU-UP /   |
    | ORAN O-DU #1 ||                       ||ORAN O-CU-UP #1  |
    |              ||        .-----.        ||                 |
    |+-------------V|      ,'  TN   `.      +V---------------+ |
    || EP_F1-U link |     |  domain   |     |EP_F1-U link to | |
    || to CU-UP #1  |    ;             :    |     DU #1      | |
    |+--------------|    ;   .-----.   :    +--------------+ | |
    ||EP_Transport 1+-------(Slice 1)-------|EP_Transport 1| | |
    |+--------------|   |    `-----'    |   +--------------+ | |
    ||              |   |               |   |                | |
    |+--------------|   :    .-----.    ;   +--------------+ | |
    ||EP_Transport 2+-------(Slice 2)-------|EP_Transport 2| | |
    |+--------------|A   :   `-----'   ;   A+--------------+ | |
    |+--------------||    |           |    |+----------------+ |
    |         . . . ||     |         |     || . . .            |
    |+--------------||      `.     ,'      |+----------------+ |
    || EP_F1-U link ||        `---'        ||EP_F1-U link to | |
    || to CU-UP #N  ||                     ||     DU #N      | |
    |+--------------||                     |+----------------+ |
    +---------------+|                     |+------------------+
                     |                     |
                     |                     |
              +------+---------------------+--------+
              |    logical transport interfaces     |
              |     e.g. GTP-U, IPSec endpoint      |
              +-------------------------------------+
Figure 5-2 Slicing example on the F1-U interface]]></artwork>
        </figure></t>

      <t>For the transport (i.e., connectivity) related part of a network
      slice, the key focus is on the EP_Transport IOC. Instances of this IOC
      serves to instantiate 3GPP interfaces (e.g., N3) which are needed to
      support Network Slicing and to define Network Slice transport resources
      within the 5G NRM. In a nutshell, the EP_Transport IOC permits to define
      additional logical interfaces for each slice instance of the 3GPP user
      plane.</t>

      <t>According to [TS28.541], the EP_Transport construct on 3GPP side has
      the following attributes: ipAddress, logicaInterfaceInfo, nextHopInfo,
      qosProfile and epApplicationRef In which, nextHopInfo could be used for
      choosing PE node in transport network and LogicalInterfaceInfo could be
      used for Transport Network Slice mapping.</t>

      <t>nextHopInfo (optional): identifies the ingress transport node. Each
      node can be identified by any combination of IP address of next-hop
      router of transport network, system name, port name and IP management
      addresses of transport nodes.</t>

      <t>logicInterfaceInfo (mandatory): a set of parameters, which includes
      logicInterfaceType and logicInterfaceId. It specifies the type and
      identifier of a logical interface. It could be a VLAN ID, MPLS Tag or
      Segment ID. This is assigned uniquely per slice.</t>

      <t>From the Transport Network domain side, these parameters assist on
      the definition of the CE transport interface configuration and shall be
      taken as an input to the transport service model to create coherent
      Network Slice transport service. Fig. Z illustrates how the EP_Transport
      parameters can relate to the IETF ones for determining the endpoint
      connectivity.</t>

      <t><figure>
          <artwork><![CDATA[  +-----------------------+        .-----.        +-----------------+
  |     3GPP CU-UP /      |      ,'  TN   `.      | 3GPP (i)UPF #1  |
  |    ORAN O-CU-UP #1    |     |  domain   |     |                 |
  |+----------------------|  +-----------+   :    +----------------+|
  ||EP_NgU link to UPF #1 |  |   PE 1    |   :    | EP_N3 link to  ||
  ||                      |  |           |    :   |    CU-UP #1    ||
  ||+---------------------|  | .-------. |    |   +---------------+||
  |||  EP_Transport for   +--+(Slice 10 )+----+---| EP_Transport  |||
  |||     S-NSSAI FWA     |  |A`-------' |    ;   +---------------+||
  |||logicInterfaceType = |  +|----------+   ;    +----------------+|
  |||       Vlan ID       |   |:             ;    +-----------------+
  ||| logicInterfaceId =  |   | |           |
  |||      Vlan 200       |   |  |         |
  |||ipAddress = 20.2.2.2 |   |   `.     ,'
  ||+--------------A------|   |     `---'
  |+---------------|------| +-+-------------------+
  +----------------|------+ |   nextHopInfoList   |
                   |        |NextHopInfo = IP/mask|
    +--------------+------+ |       of PE 1       |
    | epApplicationRef =  | | system name = PE 1  |
    |EP_NgU link to UPF#1 | |  port name = Gi1/1  |
    +---------------------+ +---------------------+
Figure 5-3 Example of 3GPP EP_Transport IOC TS28.541 parameters with correlation 
to IETF]]></artwork>
        </figure></t>

      <t>Furthermore, that same parameters should be leveraged for
      constituting the connectivity construct allowing endpoint
      interconnection. That is, there is no additional information that could
      be leveraged at service level that the one provided by EP_Transport,
      which essentially reflects an endpoint view. Fig. W represents this
      relationship between 3GPP and IETF parameters.</t>

      <t><figure>
          <artwork><![CDATA[   3GPP subsystem - CE                   Transport Network node - PE
 +----------------------+                 +----------------------+
 |InformationObjectClass|                 |   IETF Slice Model   |
 |                      <----------------->                      |
 |     EP_Transport     |                 |  LxSM + extensions   |
 +----------------------+                 +----------------------+

 Representation of connectivity:
 EP_NgU/N3, link between (O)-CU-UP and UPF 
 F1-U, link between (O)-DU and (O)-CU-UP

Figure 5-4 Relationships of the 3GPP parameters with the IETF parameters]]></artwork>
        </figure></t>

      <t>Leveraging on the EP_Transport information, the IETF NSC should be
      instructed through its NBI on performing the slice connection. Fig. Q
      graphically represents the slice connection (e.g., for Ng-U/N3) as
      expected by 3GPP by using connectivity constructs (of a IETF Network
      Slice service) to be configured by the IETF Network Slice
      Controller.</t>

      <t><figure>
          <artwork><![CDATA[     Slices in 3GPP domain                         Slices in 3GPP domain
  Model defined in IOC TS 28.541          Model defined in IOC TS 28.541

 +------------------+                                +------------------+
 |3GPP CU-UP / ORAN |                                |   3GPP UPF #1    |
 |   O-CU-UP #1     |      Slices in IETF domain     |                  |
 |                  |                                |                  |
 |+-----------------|     +----+           +----+    +-----------------+|
 || EP_NgU link to  |     |PE 1|           |PE 2|    |  EP_N3 link to  ||
 ||     UPF #1      |     |    |    .-.    |    |    |    CU-UP #1     ||
 ||+----------------|     |    |   |   |   |    |    +----------------+||
 ||| EP_Transport   |     |    |  |     |  |    |    |EP_Transport for|||
 |||for S-NSSAI 100 o--------------PDU 1-------------o  S-NSSAI 100   |||
 |||   Vlan 100     |     |    | |       | |    |    |    Vlan 100    |||
 |||  IP 10.1.1.2   |<--->|    | ;       : |    |<-->|  IP 10.1.1.2   |||
 ||+----------------|     |    |;         :|    |    +----------------+||
 ||+----------------|     |    ||         ||    |    +----------------+||
 ||| EP_Transport   |     |    ||         ||    |    |EP_Transport for|||
 |||for S-NSSAI 200 o--------------PDU 2-------------o  S-NSSAI 200   |||
 |||   Vlan 200     |     |    ||         ||    |    |    Vlan 200    |||
 |||  IP 20.2.2.2   |<--->|    ||   TN    ||    |<-->|  IP 20.2.2.2   |||
 ||+----------------|     |    ||         ||    |    +----------------+||
 ||                 |     |    ||         |+----+    +-----------------+|
 |+-----------------|     |    ||         |          +------------------+
 |+-----------------|     |    |:         ;+----+    +------------------+
 || EP_NgU link to  |     |    | :       ; |PE 3|    |   3GPP UPF #2    |
 ||     UPF #2      |     |    | |       | |    |    +-----------------+|
 ||Serving S-NSSAI  o--------------PDU 3-------------o  EP_N3 link to  ||
 ||      100        |<--->|    |  :     ;  |    |<-->|    CU-UP #1     ||
 |+-----------------|     |    |  :     ;  |    |    | Serving S-NSSAI ||
 +------------------+     +----+   `. ,'   +----+    |       100       ||
                                    '                +-----------------+|
                                                     +------------------+
Figure 5-5 Example of CU-UP Slice in the 3GPP domain using an IETF Network Slice service ]]></artwork>
        </figure></t>

      <t>From the perspective of IETF Network Slice realization, some of these
      options could be realized in a straightforward manner while other could
      require of advanced features (e.g., PBR, SRv6, FlexE, etc). IETF Network
      Slice service may be a set of techniques and underlaying technologies,
      so multiple models may be used to define slice.</t>

      <t>According to the [TS28.541] attributes in the EP_Transport, the IETF
      Network Slice may be defined by the following combination of the
      parameters: <figure>
          <artwork><![CDATA[
    +------------------------------------------------------------------+
    |                   EP_Transport attribute name                    |
    |                                                                  |
    +---------------+----------------+----------------+----------------+
    |   ipAddress   |logicInterfaceId|   nextHopInfo  | qosProfile     |
    +---------------+----------------+----------------+----------------+
    |                   Different                     |  Same for all  |
    |                   per slice                     |    slices      |
    +---------------+---------------------------------+----------------+
    |  Same for all |           Different             |  Same for all  |
    |    slices     |           per slice             |    slices      |
    +---------------+----------------+----------------+----------------+
    |   Different   |  Same for all  |   Different    |  Same for all  |
    |   per slice   |    slices      |   per slice    |    slices      |
    +---------------+----------------+----------------+----------------+
    |         Same for all           |   Different    |  Same for all  |
    |           slices               |   per slice    |    slices      |
    +--------------------------------+----------------+----------------+
    |                            Different                             |
    |                            per slice                             |
    +---------------+--------------------------------------------------+
    |  Same for all |                    Different                     |
    |    slices     |                    per slice                     |
    +---------------+--------------------------------------------------+
]]></artwork>
        </figure></t>

      <t>From the perspective of IETF Network Slice realization, some of these
      options could be realized in a straightforward manner while other could
      require of advanced features (e.g., PBR, SRv6, FlexE, etc).</t>

      <t>IETF Network Slice service may be a set of techniques and underlaying
      technologies, so multiple models may be used to define slice.</t>
    </section>

    <section title="Annex 2: Data Plane Mapping Options">
      <t>The following picture shows the end-to-end network slice in data
      plane:</t>

      <t><figure>
          <artwork><![CDATA[+--+       +-----+                           +----------------+
|UE|- - - -|(R)AN|---------------------------|       UPF      |
+--+       +-----+                           +----------------+
 |<----AN NS---->|<----------TN NS---------->|<----CN NS----->|     

]]></artwork>
        </figure>The mapping between 3GPP slice and transport slice in user
      plane could happens in:</t>

      <t>(R)AN: User data goes from (radio) access network to transport
      network</t>

      <t>UPF: User data goes from core network functions to transport
      network</t>

      <t>Editor's Note: As figure 4.7.1. in <xref target="TS28530"/>
      describes, TN NS will not only exist between AN and CN but may also
      within AN NS and CN NS. However, here we just show the TN between AN and
      CN as an example to avoid unnecessary complexity.</t>

      <t>The following picture shows the user plane protocol stack in
      end-to-end 5G system.<figure>
          <artwork><![CDATA[+-----------+                    |                  |               |
|Application+--------------------|------------------|---------------|
+-----------+                    |                  | +-----------+ |
| PDU Layer +--------------------|------------------|-| PDU Layer | |
+-----------+   +-------------+  |  +-------------+ | +-----------+ |
|           |   | ___Relay___ |--|--| ___Relay___ |-|-|           | |
|           |   |     \/ GTP-U|--|--|GTP-U\/ GTP-U|-|-|   GTP-U   | |
|   5G-AN   |   |5G-AN +------+  |  +------+------+ | +-----------+ |
|  Protocol |   |Protoc|UDP/IP|--|--|UDP/IP|UDP/IP|-|-|   UDP/IP  | |
|   Layers  |   |Layers+------+  |  +------+------+ | +-----------+ |
|           |   |      |  L2  |--|--|  L2  |  L2  |-|-|     L2    | |
|           |   |      +------+  |  +------+------+ | +-----------+ |
|           |   |      |  L1  |--|--|  L1  |  L1  |-|-|     L1    | |
+-----------+   +-------------+  |  +-------------+ | +-----------+ |
     UE              5G-AN       |        UPF       |      UPF      |
                                 N3                 N9              N6
]]></artwork>
        </figure></t>

      <t>The following figure shows the typical encapsulation in N3
      interface.</t>

      <t><figure>
          <artwork><![CDATA[+------------------------+
| Application Protocols  |     
+------------------------+      
|       IP (User)        |  
+------------------------+     
|          GTP           |    
+------------------------+      
|          UDP           |         
+------------------------+
|          IP            |
+------------------------+
|       Ethernet         |
+------------------------+
]]></artwork>
        </figure></t>

      <section title="Layer 3 and Layer 2 Encapsulations">
        <t>If the encapsulation above IP layer is not visible to Transport
        Network, it is not able to be used for network slice interworking with
        transport network. In this case, IP header and Ethernet header could
        be considered to provide information of network slice interworking
        from AN or CN to TN.</t>

        <t><figure>
            <artwork><![CDATA[+------------------------+-----------
| Application Protocols  |      ^
+------------------------+      |
|       IP (User)        |  Invisible
+------------------------+     for
|          GTP           |     TN
+------------------------+      |
|          UDP           |      V     
+------------------------+------------
|          IP            |
+------------------------+
|       Ethernet         |
+------------------------+]]></artwork>
          </figure></t>

        <t>The following field in IP header and Ethernet header could be
        considered :</t>

        <t>IP Header:</t>

        <t><list style="symbols">
            <t>DSCP: It is traditionally used for the mapping of QoS
            identifier between AN/CN and TN network. Although some values
            (e.g. The unassigned code points) may be borrowed for the network
            slice interworking, it may cause confusion between QoS mapping and
            network slicing mapping.;</t>

            <t>Destination Address: It is possible to allocate different IP
            addresses for entities in different network slice, then the
            destination IP address could be used as the network slice
            interworking identifier. However, it brings additional requirement
            to IP address planning. In addition, in some cases some AN or CN
            network slices may use duplicated IP addresses.</t>

            <t>Option fields/headers: It requires that both AN and CN nodes
            can support the encapsulation and decapsulation of the
            options.</t>
          </list>Ethernet header:</t>

        <t><list style="symbols">
            <t>VLAN ID: It is widely used for the interconnection between
            AN/CN nodes and the edge nodes of transport network for the access
            to different VPNs. One possible problem is that the number of VLAN
            ID can be supported by AN nodes is typically limited, which
            effects the number of IETF network slices a AN node can attach to.
            Another problem is the total amount of VLAN ID (4K) may not
            provide a comparable space as the network slice identifiers of
            mobile networks.</t>
          </list></t>

        <t>Two or more options described above may also be used together as
        the IETF Network Slice Interworking ID, while it would make the
        mapping relationship more complex to maintain.</t>

        <t>In some other case, when AN or CN could support more layer 3
        encapsulations, more options are available as follows:</t>

        <t>If the AN or CN could support MPLS, the protocol stack could be as
        follows: <figure>
            <artwork><![CDATA[+------------------------+-----------
| Application Protocols  |      ^
+------------------------+      |
|       IP (User)        |  Invisible
+------------------------+     for
|          GTP           |     TN
+------------------------+      |
|          UDP           |      V     
+------------------------+------------
|         MPLS           |
+------------------------+
|          IP            |
+------------------------+
|       Ethernet         |
+------------------------+]]></artwork>
          </figure></t>

        <t>A specified MPLS label could be used to as a IETF Network Slice
        Interworking ID.</t>

        <t>If the AN or CN could support SRv6, the protocol stack is as
        follows:</t>

        <figure>
          <artwork><![CDATA[+------------------------+-----------
| Application Protocols  |      ^
+------------------------+      |
|       IP (User)        |  Invisible
+------------------------+     for
|          GTP           |     TN
+------------------------+      |
|          UDP           |      V     
+------------------------+------------
|          SRH           |
+------------------------+
|         IPv6           |
+------------------------+
|       Ethernet         |
+------------------------+]]></artwork>
        </figure>

        <t>The following field could be considered to identify a network
        slice:</t>

        <t>SRH:</t>

        <t><list style="symbols">
            <t>SRv6 functions: AN/CN is supposed to support the new function
            extension of SRv6.</t>

            <t>Optional TLV: AN/CN is supposed to support the extension of
            optional TLV of SRH.</t>
          </list></t>
      </section>

      <section title="Above Layer 3 Encapsulations">
        <t>If the encapsulation above IP layer is visible to Transport
        Network, it is able to be used to identify a network slice. In this
        case, UPD and GTP-U could be considered to provide information of
        network slice interworking between AN or CN and TN.</t>

        <t><figure>
            <artwork><![CDATA[+------------------------+----------
| Application Protocols  |     |
+------------------------+ Invisible  
|       IP (User)        |     for
+------------------------+     TN
|          GTP           |     | 
+------------------------+------------        
|          UDP           |          
+------------------------+
|          IP            |
+------------------------+
|       Ethernet         |
+------------------------+]]></artwork>
          </figure></t>

        <t>The following field in UDP header could be considered:</t>

        <t>UDP Header:</t>

        <t><list style="symbols">
            <t>UDP Source port: The UDP source port is sometimes used for load
            balancing. Using it for network slice mapping would require to
            disable the load-balancing behavior.</t>
          </list></t>

        <t>A similar approach to this is followed in <xref
        target="I-D.ietf-dmm-tn-aware-mobility"/></t>
      </section>

      <section title="Summary">
        <t>From all the options overviewed, it should be noted that current
        3GPP Release 16 only supports through EP_Transport IOC the following
        slice handoff identifier: vlan tag. MPLS label or SRv6 SID. Thus, the
        consideration of more options as the ones here reported is a gap on
        3GPP specifications.</t>
      </section>
    </section>

    <section title="Contributors">
      <t>Jose Ordonez-Lucena</t>

      <t>Telefonica</t>

      <t>Ronda de la Comunicacion,</t>

      <t>s/n Sur-3 building,</t>

      <t>3rd floor Madrid 28050 Spain</t>

      <t/>

      <t>Email: joseantonio.ordonezlucena@telefonica.com</t>

      <t/>

      <t/>

      <t>Ran Pang</t>

      <t>China Unicom</t>

      <t>Email: pangran@chinaunicom.cn</t>

      <t/>

      <t/>

      <t>Liuyan Han</t>

      <t>China Mobile</t>

      <t>Email: hanliuyan@chinamobile.com</t>

      <t/>

      <t/>

      <t>Jaehwan Jin</t>

      <t>LG U+</t>

      <t>Email: daenamu1@lguplus.co.kr</t>

      <t/>

      <t/>

      <t>Jeff Tantsura</t>

      <t>Microsoft</t>

      <t>Email: jefftant.ietf@gmail.com</t>

      <t/>

      <t/>

      <t>Shunsuke Homma</t>

      <t>NTT 3-9-11,</t>

      <t>Midori-cho Musashino-shi,</t>

      <t>Tokyo 180-8585 Japan</t>

      <t>Email: shunsuke.homma.ietf@gmail.com</t>

      <t/>

      <t/>

      <t>Xavier de Foy</t>

      <t>InterDigital Inc.</t>

      <t>Canada</t>

      <t>Email: Xavier.Defoy@InterDigital.com</t>

      <t/>

      <t/>

      <t>Philip Eardley</t>

      <t>BT</t>

      <t>UK</t>

      <t>Email: philip.eardley@bt.com</t>

      <t/>

      <t/>

      <t>Kiran Makhijani</t>

      <t>Futurewei Networks</t>

      <t>US</t>

      <t>Email: kiranm@futurewei.com</t>

      <t/>

      <t/>

      <t>Hannu Flinck</t>

      <t>Nokia</t>

      <t>Finland</t>

      <t>Email: hannu.flinck@nokia-bell-labs.com</t>

      <t/>

      <t/>

      <t>Rainer Schatzmayr</t>

      <t>Deutsche Telekom</t>

      <t>Germany</t>

      <t>Email: rainer.schatzmayr@telekom.de</t>

      <t/>

      <t/>

      <t>Ali Tizghadam</t>

      <t>TELUS Communications Inc</t>

      <t>Canada</t>

      <t>Email: ali.tizghadam@telus.com</t>

      <t/>

      <t/>

      <t>Christopher Janz</t>

      <t>Huawei Canada</t>

      <t>Canada</t>

      <t>Email: christopher.janz@huawei.com</t>

      <t/>

      <t/>

      <t>Henry Yu</t>

      <t>Huawei Canada</t>

      <t>Canada</t>

      <t>Email: henry.yu1@huawei.com</t>

      <t/>
    </section>
  </middle>

  <back>
    <references title="Normative References">
      <?rfc include="reference.RFC.2119"?>

      <?rfc include='reference.I-D.ietf-teas-ietf-network-slices'?>

      <?rfc include='reference.I-D.ietf-teas-ietf-network-slice-nbi-yang'?>

      <reference anchor="ZSM003"
                 target="https://portal.3gpp.org/desktopmodules/Specifications/SpecificationDetails.aspx?specificationId=3144">
        <front>
          <title>ETSI ZSM003</title>

          <author>
            <organization/>
          </author>

          <date year=""/>
        </front>
      </reference>

      <reference anchor="TS23501"
                 target="https://portal.3gpp.org/desktopmodules/Specifications/SpecificationDetails.aspx?specificationId=3144">
        <front>
          <title>3GPP TS23.501</title>

          <author>
            <organization/>
          </author>

          <date year=""/>
        </front>
      </reference>

      <reference anchor="TS28530"
                 target="https://portal.3gpp.org/desktopmodules/Specifications/               SpecificationDetails.aspx?specificationId=3273">
        <front>
          <title>3GPP TS28.530</title>

          <author>
            <organization/>
          </author>

          <date year=""/>
        </front>
      </reference>

      <reference anchor="TS28531"
                 target="https://portal.3gpp.org/desktopmodules/Specifications/SpecificationDetails.aspx?specificationId=3274">
        <front>
          <title>3GPP TS28.531</title>

          <author>
            <organization/>
          </author>

          <date year=""/>
        </front>
      </reference>

      <reference anchor="TS28541"
                 target="https://portal.3gpp.org/desktopmodules/Specifications/SpecificationDetails.aspx?specificationId=3400">
        <front>
          <title>3GPP TS 28.541</title>

          <author>
            <organization/>
          </author>

          <date year=""/>
        </front>
      </reference>

      <reference anchor="GST"
                 target="https://www.gsma.com/newsroom/all-documents/generic-network-slice-template-v2-0/">
        <front>
          <title>Generic Network Slice Template</title>

          <author>
            <organization/>
          </author>

          <date year=""/>
        </front>
      </reference>

      <?rfc ?>
    </references>

    <references title="Informative References">
      <?rfc include='reference.I-D.ietf-teas-ietf-network-slice-use-cases'?>

      <?rfc include='reference.I-D.ietf-teas-enhanced-vpn'?>

      <?rfc include='reference.I-D.ietf-teas-nrp-scalability'?>

      <?rfc include='reference.I-D.ietf-teas-ns-ip-mpls'?>

      <?rfc include='reference.I-D.ietf-dmm-tn-aware-mobility'?>

      <?rfc include='reference.I-D.srld-teas-5g-slicing'?>
    </references>

    <section title="An Appendix">
      <t/>
    </section>
  </back>
</rfc>
